<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>EatSure – MVP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>

  <h1>EatSure</h1>

  <p>Barkod numarasını gir:</p>

  <input
    type="text"
    id="barcodeInput"
    placeholder="Örn: 8008698004845"
    style="font-size:16px; padding:8px; width:100%; max-width:320px;"
  />

  <br><br>

  <button
    onclick="scanProduct()"
    style="font-size:16px; padding:10px 16px;"
  >
    Sorgula
  </button>

  <pre
    id="result"
    style="margin-top:20px; background:#f5f5f5; padding:10px; white-space:pre-wrap;"
  ></pre>

  <script>
    async function scanProduct() {
      const barcode = document.getElementById("barcodeInput").value;
      const resultBox = document.getElementById("result");

      if (!barcode) {
        resultBox.textContent = "Lütfen barkod gir.";
        return;
      }

      resultBox.textContent = "Ürün bilgileri kontrol ediliyor…";

      try {
        const response = await fetch(
          "https://eatsure-backend-4dkh.onrender.com/scan/" + barcode
        );
        const data = await response.json();

        resultBox.textContent = JSON.stringify(data, null, 2);
      } catch (error) {
        resultBox.textContent = "Bir hata oluştu.";
      }
    }
  </script>

</body>
</html>
